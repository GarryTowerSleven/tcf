-- lua_run local ent = Entity(1):GetEyeTrace().Entity for i=0,ent:GetFlexNum() do print("[" .. i .. "] = " .. ent:GetFlexWeight(i) .. ",") end
local expressions = {
	happy = {
		scale = 1.34,
		weights = {
			[8]		=	0.48,
			[9]		=	0.17,
			[10]	=	0.31,
			[11]	=	0.06,
			[12]	=	0.35,
			[15]	=	0.28,
			[16]	=	0.10,
			[17]	=	0.10,
			[19]	=	0.15,
			[22]	=	1,
			[23]	=	1,
			[45]	=	0.578,
			[46]	=	0.208,
			[47]	=	0.694,
			[48]	=	0.984,
			[49]	=	0.451,
			[50]	=	0.673,
			[51]	=	0.746,
			[52]	=	0.603,
			[53]	=	0.143,
			[54]	=	0.018,
			[55]	=	0.106,
			[56]	=	0.265,
			[57]	=	0.979,
			[58]	=	0.771,
			[59]	=	0.507,
			[60]	=	0.703,
			[61]	=	0.960,
			[62]	=	0.253,
			[63]	=	0.545,
			[64]	=	0.561,
			[65]	=	0.448,
			[66]	=	0.933,
			[67]	=	0.666,
			[68]	=	0.552,
			[69]	=	0.870,
			[70]	=	0.263,
			[71]	=	0.705,
			[72]	=	0.020,
			[73]	=	0.781,
			[74]	=	0.599,
			[75]	=	0.409,
			[76]	=	0.725,
			[77]	=	0.154,
			[78]	=	0.965,
			[79]	=	0.524,
			[80]	=	0.517,
			[81]	=	0.125,
			[82]	=	0.595,
			[83]	=	0.509,
			[84]	=	0.471,
			[85]	=	0.551,
			[86]	=	0.737,
			[87]	=	0.599,
			[88]	=	0.630,
			[89]	=	0.402,
			[90]	=	0.214,
			[91]	=	0.625,
			[92]	=	0.121,
			[93]	=	0.541,
			[94]	=	0.105,
			[95]	=	0.965,
			[96]	=	0.008,
			[97]	=	0.643,
			[98]	=	0.071,
			[99]	=	0.971,
			[100]	=	0.543,
			[101]	=	0.925,
			[102]	=	0.972,
			[103]	=	0.884,
			[104]	=	0.344,
			[105]	=	0.738,
			[106]	=	0.806,
			[107]	=	0.881,
			[108]	=	0.194,
			[109]	=	0.352,
			[110]	=	0.443,
			[111]	=	0.776,
			[112]	=	0.575,
			[113]	=	0.388,
			[114]	=	0.879,
			[115]	=	0.245,
			[116]	=	0.481,
			[117]	=	0.835,
			[118]	=	0.312,
			[119]	=	0.939,
			[120]	=	0.768,
			[121]	=	0.560,
			[122]	=	0.836,
			[123]	=	0.532,
			[124]	=	0.280,
			[125]	=	0.716,
			[126]	=	0.774,
			[128]	=	0.456
		}
	},

	blank = {
		scale = 0,
		weights = {}
	}
}

function ENT:SetExpression( name )
	local ent = self
	-- if not IsValid(ent) then return end

	local flex = expressions[name]
	if not flex then
		ErrorNoHalt( "Attempted to set invalid expression '" .. tostring(name)
			.. "' on GMT NPC (" .. tostring(self) .. ")\n" )
		return
	end

	local weight
	for i = 1, ent:GetFlexNum() do
		weight = flex.weights[i] or 0
		ent:SetFlexWeight( i, weight )
	end

	ent:SetFlexScale( flex.scale or 1 )
end